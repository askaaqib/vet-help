{"ast":null,"code":"import _classCallCheck from \"/home/shah/Public/projects/keltjw/mern/react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/shah/Public/projects/keltjw/mern/react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/shah/Public/projects/keltjw/mern/react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/shah/Public/projects/keltjw/mern/react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/shah/Public/projects/keltjw/mern/react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/shah/Public/projects/keltjw/mern/react/src/components/requestHelp.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Skylink } from 'skylinkjs';\n\nvar RequestHelp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RequestHelp, _Component);\n\n  function RequestHelp(props) {\n    var _this;\n\n    _classCallCheck(this, RequestHelp);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RequestHelp).call(this, props));\n    _this.state = {}; // Here's a simple example on how you can start using Skylink.\n\n    _this.refToMyVideo = React.createRef();\n    return _this;\n  }\n\n  _createClass(RequestHelp, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!this.props.auth.isAuthenticated) {\n        this.props.history.push('/login');\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var elDialUIContainer = document.querySelector('#dialComponentUIContainer');\n\n      if (!elDialUIContainer) {\n        elDialUIContainer = document.createElement('div');\n        elDialUIContainer.setAttribute('id', 'dialComponentUIContainer');\n        elDialUIContainer.setAttribute('style', this.styleObjectToString(styles.dialComponentUIContainer));\n        elContentContainer.prepend(elDialUIContainer);\n      }\n\n      if (localThis.applicationState.remoteVideoStream) {\n        console.log('attaching remoteVideoStream to #video' + localThis.applicationState.remoteVideoStream.getId());\n        var elOtherCallerVideoStream = document.querySelector('#video' + localThis.applicationState.remoteVideoStream.getId());\n\n        if (!elOtherCallerVideoStream) {\n          localThis.applicationState.remoteVideoStream.play('remoteCallerVideo');\n        }\n      }\n\n      var vidElement = this.refToMyVideo.current;\n      attachMediaStream(vidElement, stream);\n\n      vidElement.onloadedmetadata = function (e) {\n        vidElement.play();\n      };\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(\"video\", {\n        ref: this.refToMyVideo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return RequestHelp;\n}(Component);\n\nRequestHelp.propTypes = {\n  auth: PropTypes.object.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    auth: state.auth\n  };\n};\n\nexport default connect(mapStateToProps)(RequestHelp);","map":{"version":3,"sources":["/home/shah/Public/projects/keltjw/mern/react/src/components/requestHelp.js"],"names":["React","Component","Link","PropTypes","connect","Skylink","RequestHelp","props","state","refToMyVideo","createRef","auth","isAuthenticated","history","push","elDialUIContainer","document","querySelector","createElement","setAttribute","styleObjectToString","styles","dialComponentUIContainer","elContentContainer","prepend","localThis","applicationState","remoteVideoStream","console","log","getId","elOtherCallerVideoStream","play","vidElement","current","attachMediaStream","stream","onloadedmetadata","e","propTypes","object","isRequired","mapStateToProps"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,OAAT,QAAwB,WAAxB;;IAEMC,W;;;;;AACF,uBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,qFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa,EAAb,CAFe,CAId;;AACA,UAAKC,YAAL,GAAoBT,KAAK,CAACU,SAAN,EAApB;AALc;AAOlB;;;;wCAEmB;AAChB,UAAG,CAAC,KAAKH,KAAL,CAAWI,IAAX,CAAgBC,eAApB,EAAqC;AACjC,aAAKL,KAAL,CAAWM,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB;AACH;AACJ;;;6BAGQ;AACL,UAAIC,iBAAiB,GAAGC,QAAQ,CAACC,aAAT,CAAuB,2BAAvB,CAAxB;;AAEA,UAAI,CAACF,iBAAL,EAAwB;AACpBA,QAAAA,iBAAiB,GAAGC,QAAQ,CAACE,aAAT,CAAuB,KAAvB,CAApB;AACAH,QAAAA,iBAAiB,CAACI,YAAlB,CAA+B,IAA/B,EAAqC,0BAArC;AACAJ,QAAAA,iBAAiB,CAACI,YAAlB,CAA+B,OAA/B,EAAwC,KAAKC,mBAAL,CAAyBC,MAAM,CAACC,wBAAhC,CAAxC;AACAC,QAAAA,kBAAkB,CAACC,OAAnB,CAA2BT,iBAA3B;AACH;;AAGD,UAAIU,SAAS,CAACC,gBAAV,CAA2BC,iBAA/B,EAAkD;AAC9CC,QAAAA,OAAO,CAACC,GAAR,CAAY,0CAA0CJ,SAAS,CAACC,gBAAV,CAA2BC,iBAA3B,CAA6CG,KAA7C,EAAtD;AACA,YAAIC,wBAAwB,GAAGf,QAAQ,CAACC,aAAT,CAAuB,WAAWQ,SAAS,CAACC,gBAAV,CAA2BC,iBAA3B,CAA6CG,KAA7C,EAAlC,CAA/B;;AACA,YAAI,CAACC,wBAAL,EAA+B;AACtCN,UAAAA,SAAS,CAACC,gBAAV,CAA2BC,iBAA3B,CAA6CK,IAA7C,CAAkD,mBAAlD;AACQ;AACJ;;AACD,UAAIC,UAAU,GAAG,KAAKxB,YAAL,CAAkByB,OAAnC;AACIC,MAAAA,iBAAiB,CAACF,UAAD,EAAaG,MAAb,CAAjB;;AACAH,MAAAA,UAAU,CAACI,gBAAX,GAA8B,UAASC,CAAT,EAAY;AAC1CL,QAAAA,UAAU,CAACD,IAAX;AACC,OAFD;;AAGJ,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAO,QAAA,GAAG,EAAE,KAAKvB,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ;AAMH;;;;EA9CqBR,S;;AAmD1BK,WAAW,CAACiC,SAAZ,GAAwB;AACpB5B,EAAAA,IAAI,EAAER,SAAS,CAACqC,MAAV,CAAiBC;AADH,CAAxB;;AAIA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAClC,KAAD;AAAA,SAAY;AAChCG,IAAAA,IAAI,EAAEH,KAAK,CAACG;AADoB,GAAZ;AAAA,CAAxB;;AAIA,eAAgBP,OAAO,CAACsC,eAAD,CAAP,CAAyBpC,WAAzB,CAAhB","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom'\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Skylink } from 'skylinkjs';\n\nclass RequestHelp extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {  }\n\n         // Here's a simple example on how you can start using Skylink.\n         this.refToMyVideo = React.createRef();\n  \n    }\n\n    componentDidMount() {\n        if(!this.props.auth.isAuthenticated) {\n            this.props.history.push('/login');\n        }\n    }\n\n\n    render() { \n        let elDialUIContainer = document.querySelector('#dialComponentUIContainer');\n\n        if (!elDialUIContainer) {\n            elDialUIContainer = document.createElement('div');\n            elDialUIContainer.setAttribute('id', 'dialComponentUIContainer');\n            elDialUIContainer.setAttribute('style', this.styleObjectToString(styles.dialComponentUIContainer));\n            elContentContainer.prepend(elDialUIContainer);\n        }\n\n\n        if (localThis.applicationState.remoteVideoStream) {\n            console.log('attaching remoteVideoStream to #video' + localThis.applicationState.remoteVideoStream.getId());\n            let elOtherCallerVideoStream = document.querySelector('#video' + localThis.applicationState.remoteVideoStream.getId());\n            if (!elOtherCallerVideoStream) {\n     localThis.applicationState.remoteVideoStream.play('remoteCallerVideo');\n            }\n        }\n        let vidElement = this.refToMyVideo.current;\n            attachMediaStream(vidElement, stream);\n            vidElement.onloadedmetadata = function(e) {\n            vidElement.play();\n            };\n        return ( \n            <div>\n                <video ref={this.refToMyVideo}></video>\n            </div>\n\n         );\n    }\n}\n\n\n \nRequestHelp.propTypes = {\n    auth: PropTypes.object.isRequired,\n}\n\nconst mapStateToProps = (state) => ({\n    auth: state.auth,\n})\n\nexport  default connect(mapStateToProps)(RequestHelp)"]},"metadata":{},"sourceType":"module"}